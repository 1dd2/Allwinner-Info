#!/usr/bin/perl -p

#    3838:	e28f0014 	add	r0, pc, #20
#s/( *)([a-z0-9]+):(.*)\tadd\t(r.), pc, #([-\d]+)(\s*;.*)?/"${1}${2}:${3}\tldr\t$4, =".sprintf("0x%x",hex($2)+8+$5)/e;
s/( *)([a-z0-9]+):(.*)\tadd([a-z]*)\t(r.), pc, #([-\d]+)(\s*;.*)?/"${1}${2}:${3}\tldr${4}\t$5, =".sprintf("0x%x",hex($2)+8+$6)/e;

#    3840:	e59f0038 	ldr	r0, [pc, #56]	; 0x3880
s/( *)([a-z0-9]+):(.*)\[pc, #([-\d]+)\]/"${1}${2}:${3}[".sprintf("0x%x",hex($2)+8+$4)."]"/e;

#    4f98:	e3c00101 	bic	r0, r0, #1073741824	; 0x40000000
#    4e6c:	e3c00103 	bic	r0, r0, #-1073741824	; 0xc0000000
#s/( *)([a-z0-9]+):(.*)\t(bic[a-z]*|orr[a-z*])\t(.*), #([-\d]+)\t;.*/"${1}${2}:${3}\t${4}\t$5, #".sprintf("0x%x",$6 & 0xffffffff)/e;
s/( *)([a-z0-9]+):(.*), #([-\d]+)\t;.*/"${1}${2}:${3}, #".sprintf("0x%x",$4 & 0xffffffff)."\t ; ".sprintf("%u",$4 & 0xffffffff)/e;

